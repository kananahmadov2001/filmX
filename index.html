<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie-Search-Website</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const API_KEY = '943eed175989bada03efdfddee323358';
    const BASE_URL = 'https://api.themoviedb.org/3';
    const IMAGE_URL = 'https://image.tmdb.org/t/p/w500';

    function App() {
      return (
        <div>
          <Header />
          <HeroSection />
          <div className="main-content container mt-4 d-flex">
            <div className="col-lg-9">
              <SearchMovies />
            </div>
            <div className="col-lg-3">
              <Sidebar />
            </div>
          </div>
          <Footer />
        </div>
      );
    }

  function Header() {
  return (
    <nav className="navbar netflix-navbar">
      <div className="container-fluid">
        <a className="navbar-brand netflix-logo" href="#">
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg"
            alt="Netflix"
            className="netflix-logo-img"
          />
        </a>
        <div className="d-flex align-items-center">
          <div className="dropdown me-3">
            <button
              className="btn btn-outline-light dropdown-toggle"
              type="button"
              id="languageDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              English
            </button>
            <ul className="dropdown-menu" aria-labelledby="languageDropdown">
              <li>
                <a className="dropdown-item" href="#">
                  English
                </a>
              </li>
              <li>
                <a className="dropdown-item" href="#">
                  Spanish
                </a>
              </li>
            </ul>
          </div>
          <button className="btn btn-light netflix-signin">Sign In</button>
        </div>
      </div>
    </nav>
  );
}

function ProgressTracker({ currentIndex, total }) {
  return (
    <div className="progress-tracker">
      {Array.from({ length: total }).map((_, index) => (
        <span
          key={index}
          className={`tracker-bar ${index === currentIndex ? "active" : ""}`}
        ></span>
      ))}
    </div>
  );
}






function HeroSection() {
  const [movies, setMovies] = React.useState([]);
  const [currentIndex, setCurrentIndex] = React.useState(0);

  React.useEffect(() => {
    async function fetchTrendingMovies() {
      try {
        const response = await axios.get(`${BASE_URL}/trending/movie/week`, {
          params: { api_key: API_KEY },
        });
        setMovies(response.data.results.slice(0, 5)); // Top 5 trending movies
      } catch (error) {
        console.error('Error fetching trending movies:', error);
      }
    }
    fetchTrendingMovies();
  }, []);

  const handleNext = () => {
    setCurrentIndex((prevIndex) => (prevIndex + 1) % movies.length);
  };

  const handlePrev = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex === 0 ? movies.length - 1 : prevIndex - 1
    );
  };

  if (movies.length === 0) {
    return <div>Loading...</div>;
  }

  const currentMovie = movies[currentIndex];

  return (
    <div className="hero-section">
      {/* TV Frame */}
      <div className="tv-frame">
        <img
          src={`https://image.tmdb.org/t/p/original${currentMovie.backdrop_path}`}
          alt={currentMovie.title}
          className="featured-movie"
        />

        <div className="movie-info">
          <h1 className="movie-title">{currentMovie.title}</h1>
          <p className="movie-meta">
            {currentMovie.release_date} â€¢ {currentMovie.vote_average} Rating
          </p>
          <p className="movie-description">{currentMovie.overview}</p>
        </div>

        <button
          className="btn btn-dark btn-left"
          aria-label="Previous"
          onClick={handlePrev}
        >
          <i className="bi bi-chevron-left"></i>
        </button>
        <button
          className="btn btn-dark btn-right"
          aria-label="Next"
          onClick={handleNext}
        >
          <i className="bi bi-chevron-right"></i>
        </button>
      </div>

      {/* Progress Tracker */}
      <ProgressTracker currentIndex={currentIndex} total={movies.length} />

      {/* Bottom Section */}
      <div className="bottom-section">
        <div className="title">The Netflix you love for just $6.99.</div>
        <div className="subtitle">
          Enjoy savings and Netflix with a few ad breaks.
        </div>
        <button className="learn-more-btn">Learn More</button>
      </div>
    </div>
  );
}







    function SearchMovies() {
      const [movies, setMovies] = React.useState([]);
      const [query, setQuery] = React.useState('');

      // Fetch default popular movies
      React.useEffect(() => {
        fetchMovies();
      }, []);

      const fetchMovies = async (searchQuery = '') => {
        try {
          const endpoint = searchQuery
            ? `${BASE_URL}/search/movie`
            : `${BASE_URL}/movie/popular`;
          const response = await axios.get(endpoint, {
            params: { api_key: API_KEY, query: searchQuery },
          });
          setMovies(response.data.results);
        } catch (error) {
          console.error('Error fetching movies:', error);
        }
      };

      const handleSearch = () => {
        fetchMovies(query);
      };

      return (
        <div>
          <div className="search-bar mb-4">
            <input
              type="text"
              className="form-control"
              placeholder="Search for a movie..."
              value={query}
              onChange={(e) => setQuery(e.target.value)}
            />
            <button
              className="btn btn-primary mt-2"
              onClick={handleSearch}
            >
              Search
            </button>
          </div>
          <MovieGrid movies={movies} />
        </div>
      );
    }

    function MovieGrid({ movies }) {
      if (!movies || movies.length === 0) {
        return <p>No movies found. Try searching for something else!</p>;
      }

      return (
        <div>
          <h3 className="mb-4">Movies</h3>
          <div className="row">
            {movies.map((movie) => (
              <div className="col-md-3 mb-4" key={movie.id}>
                <div className="card">
                  <img
                    src={movie.poster_path ? `${IMAGE_URL}${movie.poster_path}` : 'https://via.placeholder.com/500x750'}
                    className="card-img-top"
                    alt={movie.title}
                  />
                  <div className="card-body">
                    <h5 className="card-title">{movie.title}</h5>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    }

    function Sidebar() {
      return (
        <div className="sidebar">
          <div className="genres mb-4">
            <h4>Genres</h4>
            <ul className="list-unstyled">
              <li>Action</li>
              <li>Comedy</li>
              <li>Horror</li>
              <li>Romance</li>
            </ul>
          </div>
        </div>
      );
    }

    function Footer() {
      return (
        <footer className="bg-dark text-center text-white py-3 mt-4">
          <p>&copy; 2024 A-Movie. All rights reserved.</p>
        </footer>
      );
    }

    const container = document.querySelector('#root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>
